# Git 커밋 메시지 가이드

## 작성 전 필수 절차

**커밋 메시지 작성 요청을 받으면 무조건 다음을 실행합니다:**

1. **첫 번째 명령 (필수):** `git diff --staged --stat`
   - 지금 당장 실행 (과거 실행 결과 사용 금지)
   - 스테이징된 파일 목록 확인
   - 변화가 없으면 즉시 중단하고 사용자에게 알림
2. **두 번째 명령 (필수):** `git diff --staged`
   - 지금 당장 실행 (과거 실행 결과 사용 금지)
   - 터미널에 이미 있는 출력에 의존하지 말 것
   - 모든 변경 내용을 상세히 검토
3. **변경 내용 분석:**
   - 각 파일의 변경 이유 파악
   - 전체 변경의 의도와 목적 이해
4. **커밋 메시지 작성:**
   - 분석한 내용을 바탕으로 작성
   - 아래의 모든 규칙 준수

**절대 금지 사항:**

- 터미널에 이미 표시된 과거 `git diff` 결과 사용
- `git diff` 명령을 실행했다고 착각하는 것
- 이전 대화에서 실행한 `git diff` 결과 재사용
- 커밋 메시지 요청 시 `git diff` 즉시 실행하지 않는 것
- AGENTS.md 파일 수정 (이 가이드만 수정)
- Git 커밋 메시지 가이드 강화 요청 시 다른 파일 수정

**커밋 메시지 작성 전에 반드시 `git diff`를 직접 실행합니다.**

**이 가이드 강화 요청 시 이 파일(`git-commit-guide.md`)만 수정하고
`AGENTS.md`나 다른 파일은 수정하지 않습니다.**

## 형식 참고 자료

- <https://github.com/agis/git-style-guide>
- <https://cbea.ms/git-commit/>

## 형식 규칙

1. 요약은 현재형으로 작성 (예: "기능 추가", "버그 수정")
2. 요약은 최대 50자
3. 변경의 의도와 목적을 중심으로 작성
4. 코드만 보면 알 수 있는 구현 세부사항은 생략
   (예: "UserService에 login 메서드 추가" 같은 표현 지양)
5. 본문은 한 문장당 한 줄로 작성하고 72자에서 줄바꿈
6. 본문은 완전한 문장으로 작성하고 글머리 기호 사용 금지
7. 한국어로 작성

## 커밋 메시지 작성 원칙

**코드만 보면 아는 구현 세부사항을 절대 작성하지 않습니다:**

- 잘못된 예: "UserService에 login 메서드 추가"
- 잘못된 예: "useState를 useReducer로 변경"
- 잘못된 예: "API 엔드포인트 /api/users 추가"

**변경의 의도와 목적, 해결하려는 문제를 중심으로 작성합니다:**

- 올바른 예: "복잡한 상태 로직을 더 예측 가능하게 관리"
- 올바른 예: "사용자 목록 조회 기능 구현"

**"무엇을 했는가"보다 "왜 했는가"에 초점을 맞춥니다:**

- 코드 diff는 무엇이 바뀌었는지 보여줍니다
- 커밋 메시지는 왜 바꿨는지 설명해야 합니다
- 미래의 개발자(자신 포함)가 변경 이유를 이해할 수 있어야 합니다

## 문자 수 가이드

```txt
|----+----1----+----2----+----3----+----4----+----5|
요약은 이 줄을 초과하면 안 됩니다 (50자)

|----+----1----+----2----+----3----+----4----+----5----+----6----+----7|
본문 텍스트는 이 지점을 넘어서면 안 됩니다 (72자)
```

## 메시지 구성 예

```txt
요약은 최대 50자, 현재형으로 작성

본문은 각 문장 끝에서 줄바꿈합니다.
각각의 완전한 생각은 자체 줄에 있어야 합니다.
이렇게 하면 로그 기록에서 메시지를 읽기 쉽습니다.
'무엇'뿐만 아니라 변경의 '이유'에 초점을 맞춥니다.

본문은 적절하게 여러 문단으로 나눌 수 있습니다.
```

## 샘플 메시지

```txt
사용자 인증 기능 추가

로그인과 로그아웃을 처리하는 기능을 구현합니다.
JWT 기반 인증 방식을 사용합니다.
토큰은 7일 동안 유효하며 자동으로 갱신됩니다.

비밀번호는 Argon2로 해시하여 저장합니다.
최소 8자 이상의 비밀번호를 요구하도록 검증 로직을 추가합니다.
```
